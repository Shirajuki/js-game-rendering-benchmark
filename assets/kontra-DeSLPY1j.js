import{E as X}from"./engine-4ZHbU-ty.js";/**
 * @preserve
 * Kontra.js v10.0.2
 */function k(e,t){let i=Math.sin(t),s=Math.cos(t);return{x:e.x*s-e.y*i,y:e.x*i+e.y*s}}function b(e,t,i){return Math.min(Math.max(e,i),t)}let m=()=>{};function F(e,t){let i=e.indexOf(t);if(i!=-1)return e.splice(i,1),!0}let w={};function E(e,t){w[e]=w[e]||[],w[e].push(t)}function Y(e,...t){(w[e]||[]).map(i=>i(...t))}let d,f,S={get(e,t){return t=="_proxy"?!0:m}};function g(){return f}function P(e,{contextless:t=!1}={}){if(d=document.getElementById(e)||e||document.querySelector("canvas"),t&&(d=d||new Proxy({},S)),!d)throw Error("You must provide a canvas element for the game");return f=d.getContext("2d")||new Proxy({},S),f.imageSmoothingEnabled=!1,Y("init"),{canvas:d,context:f}}class u{constructor(t=0,i=0,s={}){t.x!=null?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),s._c&&(this.clamp(s._a,s._b,s._d,s._e),this.x=t,this.y=i)}set(t){this.x=t.x,this.y=t.y}add(t){return new u(this.x+t.x,this.y+t.y,this)}subtract(t){return new u(this.x-t.x,this.y-t.y,this)}scale(t){return new u(this.x*t,this.y*t)}normalize(t=this.length()||1){return new u(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,i,s,h){this._c=!0,this._a=t,this._b=i,this._d=s,this._e=h}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?b(this._a,this._d,t):t}set y(t){this._y=this._c?b(this._b,this._e,t):t}}function v(){return new u(...arguments)}class z{constructor(t){return this.init(t)}init(t={}){this.position=v(),this.velocity=v(),this.acceleration=v(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let i=this.acceleration;t&&(i=i.scale(t)),this.velocity=this.velocity.add(i);let s=this.velocity;t&&(s=s.scale(t)),this.position=this.position.add(s),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class I extends z{init({width:t=0,height:i=0,context:s=g(),render:h=this.draw,update:n=this.advance,children:r=[],anchor:a={x:0,y:0},opacity:l=1,rotation:y=0,drotation:o=0,ddrotation:p=0,scaleX:_=1,scaleY:x=1,...c}={}){this._c=[],super.init({width:t,height:i,context:s,anchor:a,opacity:l,rotation:y,drotation:o,ddrotation:p,scaleX:_,scaleY:x,...c}),this._di=!0,this._uw(),this.addChild(r),this._rf=h,this._uf=n,E("init",()=>{this.context??=g()})}update(t){this._uf(t),this.children.map(i=>i.update&&i.update(t))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),(this.scaleX!=1||this.scaleY!=1)&&t.scale(this.scaleX,this.scaleY);let i=this.width,s=this.height;this.radius&&(i=s=this.radius*2);let h=-i*this.anchor.x,n=-s*this.anchor.y;(h||n)&&t.translate(h,n),this.context.globalAlpha=this.opacity,this._rf(),(h||n)&&t.translate(-h,-n),this.children.map(a=>a.render&&a.render()),t.restore()}draw(){}_pc(){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:i=0,_wo:s=1,_wrot:h=0,_wsx:n=1,_wsy:r=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this.radius&&(this._wrx=this.radius,this._wry=this.radius),this._wo=s*this.opacity,this._wsx=n*this.scaleX,this._wsy=r*this.scaleY,this._wx=this._wx*n,this._wy=this._wy*r,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this.radius&&(this._wrx=this.radius*this._wsx,this._wry=this.radius*this._wsy),this._wrot=h+this.rotation;let{x:a,y:l}=k({x:this._wx,y:this._wy},h);this._wx=a,this._wy=l,this._wx+=t,this._wy+=i}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,radius:this.radius?{x:this._wrx,y:this._wry}:void 0,opacity:this._wo,rotation:this._wrot,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map(i=>{this.children.push(i),i.parent=this,i._pc=i._pc||m,i._pc()})}removeChild(...t){t.flat().map(i=>{F(this.children,i)&&(i.parent=null,i._pc())})}get radius(){return this._r}set radius(t){this._r=t,this._pc()}get opacity(){return this._opa}set opacity(t){this._opa=b(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}advance(t){super.advance(t),this.drotation+=this.ddrotation,this.rotation+=this.drotation}setScale(t,i=t){this.scaleX=t,this.scaleY=i}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class L extends I{init({image:t,width:i=t?t.width:void 0,height:s=t?t.height:void 0,...h}={}){super.init({image:t,width:i,height:s,...h})}get animations(){return this._a}set animations(t){let i,s;this._a={};for(i in t)this._a[i]=t[i].clone(),s=s||this._a[i];this.currentAnimation=s,this.width=this.width||s.width,this.height=this.height||s.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){if(this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color){if(this.context.fillStyle=this.color,this.radius){this.context.beginPath(),this.context.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.context.fill();return}this.context.fillRect(0,0,this.width,this.height)}}}function $(){return new L(...arguments)}function q(e){let t=e.canvas;e.clearRect(0,0,t.width,t.height)}function O({fps:e=60,clearCanvas:t=!0,update:i=m,render:s,context:h=g(),blur:n=!1}={}){if(!s)throw Error("You must provide a render() function");let r=0,a=1e3/e,l=1/e,y=t?q:m,o,p,_,x,c,M=!0;n||(window.addEventListener("focus",()=>{M=!0}),window.addEventListener("blur",()=>{M=!1})),E("init",()=>{c.context??=g()});function A(){if(p=requestAnimationFrame(A),!!M&&(_=performance.now(),x=_-o,o=_,!(x>1e3))){for(r+=x;r>=a;)Y("tick"),c.update(l),r-=a;y(c.context),c.render()}}return c={update:i,render:s,isStopped:!0,context:h,start(){this.isStopped&&(o=performance.now(),this.isStopped=!1,requestAnimationFrame(A))},stop(){this.isStopped=!0,cancelAnimationFrame(p)},_frame:A,set _last(C){o=C}},c}class j extends X{init(){if(super.init(),this.canvas.innerHTML="",window.cancelAnimationFrame(this.request),!this.loop){const{context:h}=P();this.ctx=h,this.ctx.strokeStyle="white",this.ctx.lineWidth=1}this.type==="fill"&&(this.ctx.strokeStyle="black",this.ctx.fillStyle="white");const t=new Image;t.src="sprite.png";const i=new Array(this.count),s=[1,-1];for(let h=0;h<this.count;h++){const n=10+Math.random()*80,r=Math.random()*this.width,a=Math.random()*(this.height-n),[l,y]=[3*Math.random()*s[Math.floor(Math.random()*2)],3*Math.random()*s[Math.floor(Math.random()*2)]];let o;this.type==="sprite"&&(o=$({x:r,y:a,anchor:{x:.5,y:.5},image:t})),i[h]={x:r,y:a,size:n,dx:l,dy:y,el:o}}this.particles=i}render(){this.loop||(this.loop=O({update:()=>{for(let t=0;t<this.count;t++){const i=this.particles[t];i.x-=i.dx,i.y-=i.dy,i.x+i.size<0?i.dx*=-1:i.y+i.size<0&&(i.dy*=-1),i.x>this.width?i.dx*=-1:i.y>this.height&&(i.dy*=-1),i.el&&(i.el.x=i.x,i.el.y=i.y)}},render:()=>{for(let t=0;t<this.count;t++){const i=this.particles[t];this.type==="sprite"?i.el.render():(this.ctx.beginPath(),this.ctx.arc(i.x,i.y,i.size,0,2*Math.PI),this.type==="fill"&&this.ctx.fill(),this.ctx.stroke())}this.fpsmeter.tick()}}),this.loop.start())}}document.addEventListener("DOMContentLoaded",()=>{new j().render()});
