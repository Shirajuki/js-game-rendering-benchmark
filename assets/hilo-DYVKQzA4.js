import{E as D}from"./engine-4ZHbU-ty.js";import{g as N}from"./_commonjsHelpers-Cpj98o6Y.js";var R={exports:{}},I;function L(){return I||(I=1,(function(M){(function(u){u.Hilo||(u.Hilo={});var x=(function(){var y=navigator.userAgent,v=document,h=u,s=v.documentElement,n={iphone:/iphone/i.test(y),ipad:/ipad/i.test(y),ipod:/ipod/i.test(y),ios:/iphone|ipad|ipod/i.test(y),android:/android/i.test(y),webkit:/webkit/i.test(y),chrome:/chrome/i.test(y),safari:/safari/i.test(y),firefox:/firefox/i.test(y),ie:/msie/i.test(y),opera:/opera/i.test(y),supportTouch:"ontouchstart"in h,supportCanvas:v.createElement("canvas").getContext!=null,supportStorage:!1,supportOrientation:"orientation"in h||"orientation"in h.screen,supportDeviceMotion:"ondevicemotion"in h};try{var i="hilo";localStorage.setItem(i,i),localStorage.removeItem(i),n.supportStorage=!0}catch{}var t=n.jsVendor=n.webkit||n.firefox?"webkit":n.opera?"o":n.ie?"ms":"",r=n.cssVendor="-"+t+"-",e=v.createElement("div"),a=e.style,o=a[t+"Transform"]!=null,l=a[t+"Perspective"]!=null;l&&(e.id="test3d",a=v.createElement("style"),a.textContent="@media ("+r+"transform-3d){#test3d{height:3px}}",v.head.appendChild(a),s.appendChild(e),l=e.offsetHeight==3,v.head.removeChild(a),s.removeChild(e)),n.supportTransform=o,n.supportTransform3D=l;var c=n.supportTouch,d=c?"touchstart":"mousedown",g=c?"touchmove":"mousemove",_=c?"touchend":"mouseup";return n.POINTER_START=d,n.POINTER_MOVE=g,n.POINTER_END=_,n})();u.Hilo.browser=x})(window),(function(u){u.Hilo||(u.Hilo={});var x={copy:function(y,v,h){for(var s in v)(!h||y.hasOwnProperty(s)||y[s]!==void 0)&&(y[s]=v[s]);return y}};u.Hilo.util=x})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.browser,y=u.Hilo.util,v=u,h=document,s=h.documentElement,n=0,i={},t={version:"2.0.2",getUid:function(e){var a=++n;if(e){var o=e.charCodeAt(e.length-1);return o>=48&&o<=57&&(e+="_"),e+a}return a},viewToString:function(e){for(var a,o=e;o;)a=a?o.id+"."+a:o.id,o=o.parent;return a},copy:function(e,a,o){return y.copy(e,a,o),i.copy||(i.copy=!0,console.warn("Hilo.copy has been Deprecated! Use Hilo.util.copy instead.")),e},browser:x,event:{POINTER_START:x.POINTER_START,POINTER_MOVE:x.POINTER_MOVE,POINTER_END:x.POINTER_END},align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){var a;try{a=e.getBoundingClientRect()}catch{a={top:e.offsetTop,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var o=(v.pageXOffset||s.scrollLeft)-(s.clientLeft||0)||0,l=(v.pageYOffset||s.scrollTop)-(s.clientTop||0)||0,c=v.getComputedStyle?getComputedStyle(e):e.currentStyle,d=parseInt,g=d(c.paddingLeft)+d(c.borderLeftWidth)||0,_=d(c.paddingTop)+d(c.borderTopWidth)||0,m=d(c.paddingRight)+d(c.borderRightWidth)||0,T=d(c.paddingBottom)+d(c.borderBottomWidth)||0,p=a.top||0,f=a.left||0,b=a.right||0,C=a.bottom||0;return{left:f+o+g,top:p+l+_,width:b-m-f-g,height:C-T-p-_}},createElement:function(e,a){var o=h.createElement(e),l,c,d;for(l in a)if(c=a[l],l==="style")for(d in c)o.style[d]=c[d];else o[l]=c;return o},getElement:function(e){return h.getElementById(e)},setElementStyleByView:function(e){var a=e.drawable,o=a.domElement.style,l=e._stateCache||(e._stateCache={}),c=t.browser.jsVendor,d="px",g=!1;if(this.cacheStateIfChanged(e,["visible"],l)&&(o.display=e.visible?"":"none"),this.cacheStateIfChanged(e,["alpha"],l)&&(o.opacity=e.alpha),!(!e.visible||e.alpha<=0)){if(this.cacheStateIfChanged(e,["width"],l)&&(o.width=e.width+d),this.cacheStateIfChanged(e,["height"],l)&&(o.height=e.height+d),this.cacheStateIfChanged(e,["depth"],l)&&(o.zIndex=e.depth+1),e.transform){var _=e.transform;(g=this.cacheStateIfChanged(e,["pivotX","pivotY"],l))&&(o[c+"TransformOrigin"]="0 0"),o[c+"Transform"]="matrix3d("+_.a+", "+_.b+", 0, 0, "+_.c+", "+_.d+", 0, 0, 0, 0, 1, 0, "+_.tx+", "+_.ty+", 0, 1)"}else(g=this.cacheStateIfChanged(e,["pivotX","pivotY"],l))&&(o[c+"TransformOrigin"]=e.pivotX+d+" "+e.pivotY+d),(this.cacheStateIfChanged(e,["x","y","rotation","scaleX","scaleY"],l)||g)&&(o[c+"Transform"]=this.getTransformCSS(e));this.cacheStateIfChanged(e,["background"],l)&&(o.backgroundColor=e.background),o.pointerEvents||(o.pointerEvents="none");var m=a.image;if(m){var T=m.src;T!==l.image&&(l.image=T,o.backgroundImage="url("+T+")");var p=a.rect;if(p){var f=p[0],b=p[1];f!==l.sx&&(l.sx=f,o.backgroundPositionX=-f+d),b!==l.sy&&(l.sy=b,o.backgroundPositionY=-b+d)}}var C=e.mask;if(C){var E=C.drawable.domElement.style.backgroundImage;E!==l.maskImage&&(l.maskImage=E,o[c+"MaskImage"]=E,o[c+"MaskRepeat"]="no-repeat");var H=C.x,S=C.y;(H!==l.maskX||S!==l.maskY)&&(l.maskX=H,l.maskY=S,o[c+"MaskPosition"]=H+d+" "+S+d)}}},cacheStateIfChanged:function(e,a,o){var l,c,d,g,_=!1;for(l=0,c=a.length;l<c;l++)d=a[l],g=e[d],g!=o[d]&&(o[d]=g,_=!0);return _},getTransformCSS:function(e){var a=this.browser.supportTransform3D,o=a?"3d":"";return"translate"+o+"("+(e.x-e.pivotX)+"px, "+(e.y-e.pivotY)+(a?"px, 0px)":"px)")+"rotate"+o+(a?"(0, 0, 1, ":"(")+e.rotation+"deg)scale"+o+"("+e.scaleX+", "+e.scaleY+(a?", 1)":")")}};for(var r in t)u.Hilo[r]=t[r]})(window),(function(u){u.Hilo||(u.Hilo={});var x=(function(){var y=function(r){r=r||{};var e=r.hasOwnProperty("constructor")?r.constructor:function(){};return v.call(e,r),e},v=function(r){var e={},a,o;for(a in r)o=r[a],h.hasOwnProperty(a)?h[a].call(this,o):e[a]=o;n(this.prototype,e)},h={Extends:function(r){var e=this.prototype,a=s(r.prototype);n(this,r),n(a,e),a.constructor=this,this.prototype=a,this.superclass=r.prototype},Mixes:function(r){r instanceof Array||(r=[r]);for(var e=this.prototype,a;a=r.shift();)n(e,a.prototype||a)},Statics:function(r){n(this,r)}},s=(function(){if(Object.__proto__)return function(e){return{__proto__:e}};var r=function(){};return function(e){return r.prototype=e,new r}})(),n=function(r){for(var e=1,a=arguments.length;e<a;e++){var o=arguments[e],l;for(var c in o){var d=o[c];if(d&&typeof d=="object"&&(d.value!==void 0||typeof d.get=="function"||typeof d.set=="function")){l=l||{},l[c]=d;continue}r[c]=d}l&&t(r,l)}return r},i,t;try{i=Object.defineProperty,t=Object.defineProperties,i({},"$",{value:0})}catch{"__defineGetter__"in Object&&(i=function(e,a,o){return"value"in o&&(e[a]=o.value),"get"in o&&e.__defineGetter__(a,o.get),"set"in o&&e.__defineSetter__(a,o.set),e},t=function(e,a){for(var o in a)a.hasOwnProperty(o)&&i(e,o,a[o]);return e})}return{create:y,mix:n}})();u.Hilo.Class=x})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=x.create({constructor:function(v,h,s,n,i,t){this.a=v,this.b=h,this.c=s,this.d=n,this.tx=i,this.ty=t},set:function(v,h,s,n,i,t){return this.a=v,this.b=h,this.c=s,this.d=n,this.tx=i,this.ty=t,this},copy:function(v){return this.a=v.a,this.b=v.b,this.c=v.c,this.d=v.d,this.tx=v.tx,this.ty=v.ty,this},clone:function(){return new y().copy(this)},concat:function(v){var h=arguments,s=this.a,n=this.b,i=this.c,t=this.d,r=this.tx,e=this.ty,a,o,l,c,d,g;return h.length>=6?(a=h[0],o=h[1],l=h[2],c=h[3],d=h[4],g=h[5]):(a=v.a,o=v.b,l=v.c,c=v.d,d=v.tx,g=v.ty),this.a=s*a+n*l,this.b=s*o+n*c,this.c=i*a+t*l,this.d=i*o+t*c,this.tx=r*a+e*l+d,this.ty=r*o+e*c+g,this},rotate:function(v){var h=Math.sin(v),s=Math.cos(v),n=this.a,i=this.b,t=this.c,r=this.d,e=this.tx,a=this.ty;return this.a=n*s-i*h,this.b=n*h+i*s,this.c=t*s-r*h,this.d=t*h+r*s,this.tx=e*s-a*h,this.ty=e*h+a*s,this},scale:function(v,h){return this.a*=v,this.d*=h,this.c*=v,this.b*=h,this.tx*=v,this.ty*=h,this},translate:function(v,h){return this.tx+=v,this.ty+=h,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var v=this.a,h=this.b,s=this.c,n=this.d,i=this.tx,t=v*n-h*s;return this.a=n/t,this.b=-h/t,this.c=-s/t,this.d=v/t,this.tx=(s*this.ty-n*i)/t,this.ty=-(v*this.ty-h*i)/t,this},transformPoint:function(v,h,s){var n=v.x*this.a+v.y*this.c+this.tx,i=v.x*this.b+v.y*this.d+this.ty;return h&&(n=n+.5>>0,i=i+.5>>0),s?{x:n,y:i}:(v.x=n,v.y=i,v)}});u.Hilo.Matrix=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y={_listeners:null,on:function(i,t,r){for(var e=this._listeners=this._listeners||{},a=e[i]=e[i]||[],o=0,l=a.length;o<l;o++){var c=a[o];if(c.listener===t)return}return a.push({listener:t,once:r}),this},off:function(i,t){if(arguments.length==0)return this._listeners=null,this;var r=this._listeners&&this._listeners[i];if(r){if(arguments.length==1)return delete this._listeners[i],this;for(var e=0,a=r.length;e<a;e++){var o=r[e];if(o.listener===t){r.splice(e,1),r.length===0&&delete this._listeners[i];break}}}return this},fire:function(i,t){var r,e;typeof i=="string"?e=i:(r=i,e=i.type);var a=this._listeners;if(!a)return!1;var o=a[e];if(o){var l=o.slice(0);if(r=r||new v(e,this,t),r._stopped)return!1;for(var c=0;c<l.length;c++){var d=l[c];if(d.listener.call(this,r),d.once){var g=o.indexOf(d);g>-1&&o.splice(g,1)}}return o.length==0&&delete a[e],!0}return!1}},v=x.create({constructor:function(t,r,e){this.type=t,this.target=r,this.detail=e,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),h=u.Event;if(h){var s=h.prototype,n=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){n&&n.call(this),this._stopped=!0}}u.Hilo.EventMixin=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=x.create({constructor:function(h){this.init(h)},image:null,rect:null,init:function(h){var s=this,n=s.image;v.isDrawable(h)?s.image=h:y.copy(s,h,!0);var i=s.image;if(typeof i=="string")if(n&&i===n.getAttribute("src"))i=s.image=n;else{s.image=null;var t=new Image;h.crossOrigin&&(t.crossOrigin="Anonymous"),t.onload=function(){t.onload=null,s.init(t)},t.src=i;return}i&&!s.rect&&(s.rect=[0,0,i.width,i.height])},Statics:{isDrawable:function(h){if(!h||!h.tagName)return!1;var s=h.tagName.toLowerCase();return s==="img"||s==="canvas"||s==="video"}}});u.Hilo.Drawable=v})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=x.create({constructor:function(h){h=h||{},y.copy(this,h,!0)},renderType:null,canvas:null,stage:null,blendMode:"source-over",startDraw:function(h){},draw:function(h){},endDraw:function(h){},transform:function(){},hide:function(){},remove:function(h){},clear:function(h,s,n,i){},resize:function(h,s){}});u.Hilo.Renderer=v})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo,v=u.Hilo.Renderer,h=x.create({Extends:v,constructor:function(s){h.superclass.constructor.call(this,s),this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(s){return s.visible&&s.alpha>0?(s===this.stage&&this.context.clearRect(0,0,s.width,s.height),s.blendMode!==this.blendMode&&(this.context.globalCompositeOperation=this.blendMode=s.blendMode),this.context.save(),!0):!1},draw:function(s){var n=this.context,i=s.width,t=s.height,r=s.background;r&&(n.fillStyle=r,n.fillRect(0,0,i,t));var e=s.drawable,a=e&&e.image;if(a){var o=e.rect,l=o[2],c=o[3],d=o[4],g=o[5];if(!l||!c)return;!i&&!t&&(i=s.width=l,t=s.height=c),(d||g)&&n.translate(d-l*.5,g-c*.5),n.drawImage(a,o[0],o[1],l,c,0,0,i,t)}},endDraw:function(s){this.context.restore()},transform:function(s){var n=s.drawable;if(n&&n.domElement){y.setElementStyleByView(s);return}var i=this.context,t=s.scaleX,r=s.scaleY;if(s===this.stage){var e=this.canvas.style,a=s._scaleX,o=s._scaleY,l=!1;(!a&&t!=1||a&&a!=t)&&(s._scaleX=t,e.width=t*s.width+"px",l=!0),(!o&&r!=1||o&&o!=r)&&(s._scaleY=r,e.height=r*s.height+"px",l=!0),l&&s.updateViewport()}else{var c=s.x,d=s.y,g=s.pivotX,_=s.pivotY,m=s.rotation%360,T=s.transform,p=s.mask;p&&(p._render(this),i.clip());var f=s.align;if(f){var b=s.getAlignPosition();c=b.x,d=b.y}T?i.transform(T.a,T.b,T.c,T.d,T.tx,T.ty):((c!=0||d!=0)&&i.translate(c,d),m!=0&&i.rotate(m*Math.PI/180),(t!=1||r!=1)&&i.scale(t,r),(g!=0||_!=0)&&i.translate(-g,-_))}s.alpha>0&&(i.globalAlpha*=s.alpha)},remove:function(s){var n=s.drawable,i=n&&n.domElement;if(i){var t=i.parentNode;t&&t.removeChild(i)}},clear:function(s,n,i,t){this.context.clearRect(s,n,i,t)},resize:function(s,n){var i=this.canvas,t=this.stage,r=i.style;i.width=s,i.height=n,r.width=t.width*t.scaleX+"px",r.height=t.height*t.scaleY+"px"}});u.Hilo.CanvasRenderer=h})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo,v=u.Hilo.Renderer,h=u.Hilo.Drawable,s=(function(){return x.create({Extends:v,constructor:function(i){s.superclass.constructor.call(this,i)},renderType:"dom",startDraw:function(i){var t=i.drawable=i.drawable||new h;return t.domElement=t.domElement||n(i,t),!0},draw:function(i){var t=i.parent,r=i.drawable.domElement,e=r.parentNode;if(t){var a=t.drawable.domElement;if(a!=e&&a.appendChild(r),!i.width&&!i.height){var o=i.drawable.rect;o&&(o[2]||o[3])&&(i.width=o[2],i.height=o[3])}}else i===this.stage&&!e&&(r.style.overflow="hidden",this.canvas.appendChild(r))},transform:function(i){if(y.setElementStyleByView(i),i===this.stage){var t=this.canvas.style,r=i._scaleX,e=i._scaleY,a=i.scaleX,o=i.scaleY;(!r&&a!=1||r&&r!=a)&&(i._scaleX=a,t.width=a*i.width+"px"),(!e&&o!=1||e&&e!=o)&&(i._scaleY=o,t.height=o*i.height+"px")}},remove:function(i){var t=i.drawable,r=t&&t.domElement;if(r){var e=r.parentNode;e&&e.removeChild(r)}},hide:function(i){var t=i.drawable&&i.drawable.domElement;t&&(t.style.display="none")},resize:function(i,t){var r=this.canvas.style;r.width=i+"px",r.height=t+"px",r.position!="absolute"&&(r.position="relative")}});function n(i,t){var r=i.tagName||"div",e=t.image,a=i.width||e&&e.width,o=i.height||e&&e.height,l=y.createElement(r),c=l.style;if(i.id&&(l.id=i.id),c.position="absolute",c.left=(i.left||0)+"px",c.top=(i.top||0)+"px",c.width=a+"px",c.height=o+"px",r=="canvas"){if(l.width=a,l.height=o,e){var d=l.getContext("2d"),g=t.rect||[0,0,a,o];d.drawImage(e,g[0],g[1],g[2],g[3],i.x||0,i.y||0,i.width||g[2],i.height||g[3])}}else if(c.opacity=i.alpha!=null?i.alpha:1,(i===this.stage||i.clipChildren)&&(c.overflow="hidden"),e&&e.src){c.backgroundImage="url("+e.src+")";var _=i.rectX||0,m=i.rectY||0;c.backgroundPosition=-_+"px "+-m+"px"}return l}})();u.Hilo.DOMRenderer=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo,v=u.Hilo.Renderer,h=u.Hilo.Matrix,s=Math.PI/180,n=x.create({Extends:v,Statics:{MAX_BATCH_NUM:2e3,ATTRIBUTE_NUM:5,isSupport:function(){if(this._isSupported==null){var t=document.createElement("canvas");t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))?this._isSupported=!0:this._isSupported=!1}return this._isSupported},contextOptions:null},renderType:"webgl",gl:null,_isContextLost:!1,_cacheTexture:{},constructor:function(t){n.superclass.constructor.call(this,t);var r=this,e=n.contextOptions||{};this.gl=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this.maxBatchNum=n.MAX_BATCH_NUM,this.positionStride=n.ATTRIBUTE_NUM*4;var a=this.maxBatchNum*n.ATTRIBUTE_NUM*4,o=this.maxBatchNum*6;this.arrayBuffer=new ArrayBuffer(a*4),this.float32Array=new Float32Array(this.arrayBuffer),this.uint32Array=new Uint32Array(this.arrayBuffer),this.indexs=new Uint16Array(o);for(var l=0,c=0;l<o;l+=6,c+=4)this.indexs[l+0]=c+0,this.indexs[l+1]=c+1,this.indexs[l+2]=c+2,this.indexs[l+3]=c+1,this.indexs[l+4]=c+2,this.indexs[l+5]=c+3;this.batchIndex=0,this.sprites=[],this.canvas.addEventListener("webglcontextlost",function(d){r._isContextLost=!0,d.preventDefault()},!1),this.canvas.addEventListener("webglcontextrestored",function(d){r._isContextLost=!1,r.setupWebGLStateAndResource()},!1),this.setupWebGLStateAndResource()},setupWebGLStateAndResource:function(){var t=this.gl;t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this._cacheTexture={},this._initShaders(),this.defaultShader.active(),this.positionBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indexs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.arrayBuffer,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.a_position,2,t.FLOAT,!1,this.positionStride,0),t.vertexAttribPointer(this.a_TexCoord,2,t.FLOAT,!1,this.positionStride,8),t.vertexAttribPointer(this.a_tint,4,t.UNSIGNED_BYTE,!0,this.positionStride,16)},context:null,startDraw:function(t){return t.visible&&t.alpha>0?(t===this.stage&&this.clear(),!0):!1},draw:function(t){var r=t.width,e=t.height;t.background;var a=t.drawable,o=a&&a.image;if(o){var l=a.rect,c=l[2],d=l[3];!r&&!e&&(r=t.width=c,e=t.height=d),this.batchIndex>=this.maxBatchNum&&this._renderBatches();var g=this._createVertexs(o,l[0],l[1],c,d,0,0,r,e),_=this.batchIndex*this.positionStride,m=this.float32Array,T=this.uint32Array,p=(t.tint>>16)+(t.tint&65280)+((t.tint&255)<<16)+(t.__webglRenderAlpha*255<<24);m[_+0]=g[0],m[_+1]=g[1],m[_+2]=g[2],m[_+3]=g[3],T[_+4]=p,m[_+5]=g[4],m[_+6]=g[5],m[_+7]=g[6],m[_+8]=g[7],T[_+9]=p,m[_+10]=g[8],m[_+11]=g[9],m[_+12]=g[10],m[_+13]=g[11],T[_+14]=p,m[_+15]=g[12],m[_+16]=g[13],m[_+17]=g[14],m[_+18]=g[15],T[_+19]=p;for(var f=t.__webglWorldMatrix,b=0;b<4;b++){var C=m[_+b*5],E=m[_+b*5+1];m[_+b*5]=f.a*C+f.c*E+f.tx,m[_+b*5+1]=f.b*C+f.d*E+f.ty}t.__textureImage=o,this.sprites[this.batchIndex++]=t}},endDraw:function(t){t===this.stage&&this._renderBatches()},transform:function(t){var r=t.drawable;if(r&&r.domElement){y.setElementStyleByView(t);return}var e=t.scaleX,a=t.scaleY;if(t===this.stage){var o=this.canvas.style,l=t._scaleX,c=t._scaleY,d=!1;(!l&&e!=1||l&&l!=e)&&(t._scaleX=e,o.width=e*t.width+"px",d=!0),(!c&&a!=1||c&&c!=a)&&(t._scaleY=a,o.height=a*t.height+"px",d=!0),d&&t.updateViewport(),t.__webglWorldMatrix=t.__webglWorldMatrix||new h(1,0,0,1,0,0)}else t.parent&&(t.__webglWorldMatrix=t.__webglWorldMatrix||new h(1,0,0,1,0,0),this._setConcatenatedMatrix(t,t.parent));t.alpha>0&&(t.parent&&t.parent.__webglRenderAlpha?t.__webglRenderAlpha=t.alpha*t.parent.__webglRenderAlpha:t.__webglRenderAlpha=t.alpha)},remove:function(t){var r=t.drawable,e=r&&r.domElement;if(e){var a=e.parentNode;a&&a.removeChild(e)}},clear:function(t,r,e,a){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(t,r){if(this.width!==t||this.height!==r){var e=this.canvas,a=this.stage,o=e.style;this.width=e.width=t,this.height=e.height=r,o.width=a.width*a.scaleX+"px",o.height=a.height*a.scaleY+"px",this.gl.viewport(0,0,t,r),this.canvasHalfWidth=t*.5,this.canvasHalfHeight=r*.5,this._uploadProjectionTransform(!0)}},_renderBatches:function(){var t=this.gl;t.bufferSubData(t.ARRAY_BUFFER,0,this.uint32Array.subarray(0,this.batchIndex*this.positionStride));for(var r=0,e=null,a=0;a<this.batchIndex;a++){var o=this.sprites[a];e&&e!==o.__textureImage&&(this._renderBatch(r,a),r=a),e=o.__textureImage}this._renderBatch(r,this.batchIndex),this.batchIndex=0},_renderBatch:function(t,r){var e=this.gl,a=r-t;a>0&&(e.bindTexture(e.TEXTURE_2D,this._getTexture(this.sprites[t])),e.drawElements(e.TRIANGLES,a*6,e.UNSIGNED_SHORT,t*6*2))},_uploadProjectionTransform:function(t){(!this._projectionTransformElements||t)&&(this._projectionTransformElements=new Float32Array([1/this.canvasHalfWidth,0,0,0,-1/this.canvasHalfHeight,0,-1,1,1])),this.gl.uniformMatrix3fv(this.u_projectionTransform,!1,this._projectionTransformElements)},_initShaders:function(){var t=`		            attribute vec2 a_position;
		            attribute vec2 a_TexCoord;
		            attribute vec4 a_tint;
		            uniform mat3 u_projectionTransform;
		            varying vec2 v_TexCoord;
		            varying vec4 v_tint;
		            void main(){
		                gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);
		                v_TexCoord = a_TexCoord;
		                v_tint = vec4(a_tint.rgb * a_tint.a, a_tint.a);
		            }
		        `,r=`
		            precision mediump float;
		            uniform sampler2D u_Sampler;
		            varying vec2 v_TexCoord;
		            varying vec4 v_tint;
		            void main(){
		                gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_tint;
		            }
		        `;this.defaultShader=new i(this,{v:t,f:r},{attributes:["a_position","a_TexCoord","a_tint"],uniforms:["u_projectionTransform","u_Sampler"]})},_createVertexs:function(t,r,e,a,o,l,c,d,g){var _=this.__tempVertexs||[],m=t.width,T=t.height;a=a/m,o=o/T,r=r/m,e=e/T,d=d,g=g,l=l,c=c,a+r>1&&(a=1-r),o+e>1&&(o=1-e);var p=0;return _[p++]=l,_[p++]=c,_[p++]=r,_[p++]=e,_[p++]=l+d,_[p++]=c,_[p++]=r+a,_[p++]=e,_[p++]=l,_[p++]=c+g,_[p++]=r,_[p++]=e+o,_[p++]=l+d,_[p++]=c+g,_[p++]=r+a,_[p++]=e+o,_},_setConcatenatedMatrix:function(t,r){var e=t.__webglWorldMatrix,a=1,o=0,l=t.rotation%360,c=t.pivotX,d=t.pivotY,g=t.scaleX,_=t.scaleY,m=t.transform;if(m)e.copy(m);else{if(l){var T=l*s;a=Math.cos(T),o=Math.sin(T)}var p=t.getAlignPosition();e.a=a*g,e.b=o*g,e.c=-o*_,e.d=a*_,e.tx=p.x-e.a*c-e.c*d,e.ty=p.y-e.b*c-e.d*d}e.concat(r.__webglWorldMatrix)},_getTexture:function(t){var r=t.__textureImage,e=this._cacheTexture[r.src];return e||(e=this.activeShader.uploadTexture(r)),e}}),i=function(t,r,e){this.renderer=t,this.gl=t.gl,this.program=this._createProgram(this.gl,r.v,r.f),e=e||{},this.attributes=e.attributes||[],this.uniforms=e.uniforms||[]};i.prototype={active:function(){var t=this,r=t.renderer,e=t.gl,a=t.program;a&&e&&(r.activeShader=t,e.useProgram(a),t.attributes.forEach(function(o){r[o]=e.getAttribLocation(a,o),e.enableVertexAttribArray(r[o])}),t.uniforms.forEach(function(o){r[o]=e.getUniformLocation(a,o)}),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,r._uploadProjectionTransform()))},uploadTexture:function(t){var r=this.gl,e=this.renderer,a=r.createTexture(),o=e.u_Sampler;return r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.uniform1i(o,0),r.bindTexture(r.TEXTURE_2D,null),this.renderer._cacheTexture[t.src]=a,a},_createProgram:function(t,r,e){var a=this._createShader(t,t.VERTEX_SHADER,r),o=this._createShader(t,t.FRAGMENT_SHADER,e);if(!a||!o)return null;var l=t.createProgram();if(l){t.attachShader(l,a),t.attachShader(l,o),t.linkProgram(l),t.deleteShader(o),t.deleteShader(a);var c=t.getProgramParameter(l,t.LINK_STATUS);if(!c){var d=t.getProgramInfoLog(l);return console.log("Failed to link program: "+d),t.deleteProgram(l),null}}return l},_createShader:function(t,r,e){var a=t.createShader(r);if(a){t.shaderSource(a,e),t.compileShader(a);var o=t.getShaderParameter(a,t.COMPILE_STATUS);if(!o){var l=t.getShaderInfoLog(a);return console.log("Failed to compile shader: "+l),t.deleteShader(a),null}}return a}},u.Hilo.WebGLRenderer=n})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.EventMixin,h=u.Hilo.Matrix,s=u.Hilo.util,n=(function(){return y.create({Mixes:v,constructor:function(e){e=e||{},this.id=this.id||e.id||x.getUid("View"),s.copy(this,e,!0)},tint:16777215,id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,transform:null,blendMode:"source-over",getStage:function(){for(var e=this,a;a=e.parent;)e=a;return e.canvas?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(e,a){return typeof a=="number"?e.addChildAt(this,a):e.addChild(this),this},removeFromParent:function(){var e=this.parent;return e&&e.removeChild(this),this},getBounds:function(){for(var e=this.width,a=this.height,o=this.getConcatenatedMatrix(),l=this.boundsArea||[{x:0,y:0},{x:e,y:0},{x:e,y:a},{x:0,y:a}],c=[],d,g,_,m,T,p,f,b=0,C=l.length;b<C;b++)d=o.transformPoint(l[b],!0,!0),g=d.x,_=d.y,b==0?(m=T=g,p=f=_):(m>g?m=g:T<g&&(T=g),p>_?p=_:f<_&&(f=_)),c[b]=d;return c.x=m,c.y=p,c.width=T-m,c.height=f-p,c},getConcatenatedMatrix:function(e){for(var a=new h(1,0,0,1,0,0),o=this;o!=e&&o.parent;o=o.parent){var l=1,c=0,d=o.rotation%360,g=o.pivotX,_=o.pivotY,m=o.scaleX,T=o.scaleY,p=o.transform;if(p)a.concat(p);else{if(d){var f=d*Math.PI/180;l=Math.cos(f),c=Math.sin(f)}g!=0&&(a.tx-=g),_!=0&&(a.ty-=_);var b=o.getAlignPosition();a.concat(l*m,c*m,-c*T,l*T,b.x,b.y)}}return a},getAlignPosition:function(){var e=this.parent,a=this.align,o=this.x,l=this.y;if(e&&this.align){if(typeof a=="function")return this.align();var c=this.width,d=this.height,g=e.width,_=e.height;switch(a){case"TL":o=0,l=0;break;case"T":o=g-c>>1,l=0;break;case"TR":o=g-c,l=0;break;case"L":o=0,l=_-d>>1;break;case"C":o=g-c>>1,l=_-d>>1;break;case"R":o=g-c,l=_-d>>1;break;case"BL":o=0,l=_-d;break;case"B":o=g-c>>1,l=_-d;break;case"BR":o=g-c,l=_-d;break}}return{x:o,y:l}},hitTestPoint:function(e,a,o){var l=this.getBounds(),c=e>=l.x&&e<=l.x+l.width&&a>=l.y&&a<=l.y+l.height;return c&&o&&(c=i(e,a,l)),c},hitTestObject:function(e,a){var o=this.getBounds(),l=e.getBounds(),c=o.x<=l.x+l.width&&l.x<=o.x+o.width&&o.y<=l.y+l.height&&l.y<=o.y+o.height;return c&&a&&(c=t(o,l)),!!c},_render:function(e,a){(!this.onUpdate||this.onUpdate(a)!==!1)&&e.startDraw(this)&&(e.transform(this),this.render(e,a),e.endDraw(this))},_fireMouseEvent:function(e){if(e.eventCurrentTarget=this,this.fire(e),e.type=="mousemove"){if(!this.__mouseOver){this.__mouseOver=!0;var a=s.copy({},e);a.type="mouseover",this.fire(a)}}else e.type=="mouseout"&&(this.__mouseOver=!1);var o=this.parent;!e._stopped&&!e._stopPropagationed&&o&&((e.type=="mouseout"||e.type=="touchout")&&o.hitTestPoint(e.stageX,e.stageY,!0)||o._fireMouseEvent(e))},onUpdate:null,render:function(e,a){e.draw(this)},toString:function(){return x.viewToString(this)}});function i(e,a,o){for(var l=0,c=!1,d,g,_,m,T=0,p=o.length;T<p;T++){var f=o[T],b=o[(T+1)%p];if(f.y==b.y&&a==f.y&&(f.x>b.x?(d=b.x,g=f.x):(d=f.x,g=b.x),e>=d&&e<=g)){c=!0;continue}if(f.y>b.y?(_=b.y,m=f.y):(_=f.y,m=b.y),!(a<_||a>m)){var C=(a-f.y)*(b.x-f.x)/(b.y-f.y)+f.x;if(C>e?l++:C==e&&(c=!0),f.x>e&&f.y==a){var E=o[(p+T-1)%p];(E.y<a&&b.y>a||E.y>a&&b.y<a)&&l++}}}return c||l%2==1}function t(e,a){var o=r(e,a,{overlap:-1/0,normal:{x:0,y:0}});return o?r(a,e,o):!1}function r(e,a,o){for(var l=e.length,c=a.length,d,g,_,m,T,p,f,b,C,E={x:0,y:0},H=0;H<l;H++){d=e[H],g=e[H<l-1?H+1:0],E.x=d.y-g.y,E.y=g.x-d.x,_=Math.sqrt(E.x*E.x+E.y*E.y),E.x/=_,E.y/=_,m=T=e[0].x*E.x+e[0].y*E.y;for(var S=1;S<l;S++)b=e[S].x*E.x+e[S].y*E.y,b>T?T=b:b<m&&(m=b);for(p=f=a[0].x*E.x+a[0].y*E.y,S=1;S<c;S++)b=a[S].x*E.x+a[S].y*E.y,b>f?f=b:b<p&&(p=b);if(m<p?(C=p-T,E.x=-E.x,E.y=-E.y):C=m-f,C>=0)return!1;C>o.overlap&&(o.overlap=C,o.normal.x=E.x,o.normal.y=E.y)}return o}})();u.Hilo.View=n})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Drawable,y=u.Hilo.browser,v,h,s={_cacheDirty:!0,cache:function(n){(n||this._cacheDirty||!this.drawable)&&this.updateCache()},updateCache:function(){y.supportCanvas&&(v||(v=document.createElement("canvas"),h=v.getContext("2d")),v.width=this.width,v.height=this.height,this._draw(h),this.drawable=this.drawable||new x,this.drawable.init({image:v.toDataURL()}),this._cacheDirty=!1)},setCacheDirty:function(n){this._cacheDirty=n}};u.Hilo.CacheMixin=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=y.create({Extends:v,constructor:function(s){s=s||{},this.id=this.id||s.id||x.getUid("Container"),h.superclass.constructor.call(this,s),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(s,n){var i=this.children,t=i.length,r=s.parent;n=n<0?0:n>t?t:n;var e=this.getChildIndex(s);if(e==n)return this;if(e>=0?(i.splice(e,1),n=n==t?t-1:n):r&&r.removeChild(s),i.splice(n,0,s),e<0)this._updateChildren(n);else{var a=e<n?e:n,o=e<n?n:e;this._updateChildren(a,o+1)}return this},addChild:function(s){for(var n=this.children.length,i=arguments,t=0,r=i.length;t<r;t++)this.addChildAt(i[t],n+t);return this},removeChildAt:function(s){var n=this.children;if(s<0||s>=n.length)return null;var i=n[s];if(i){if(!i.__renderer){for(var t=i;t=t.parent;)if(t.renderer){i.__renderer=t.renderer;break}else if(t.__renderer){i.__renderer=t.__renderer;break}}i.__renderer&&i.__renderer.remove(i),i.parent=null,i.depth=-1}return n.splice(s,1),this._updateChildren(s),i},removeChild:function(s){return this.removeChildAt(this.getChildIndex(s))},removeChildById:function(s){for(var n=this.children,i,t=0,r=n.length;t<r;t++)if(i=n[t],i.id===s)return this.removeChildAt(t),i;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(s){var n=this.children;return s<0||s>=n.length?null:n[s]},getChildById:function(s){for(var n=this.children,i,t=0,r=n.length;t<r;t++)if(i=n[t],i.id===s)return i;return null},getChildIndex:function(s){return this.children.indexOf(s)},setChildIndex:function(s,n){var i=this.children,t=i.indexOf(s);if(t>=0&&t!=n){var r=i.length;n=n<0?0:n>=r?r-1:n,i.splice(t,1),i.splice(n,0,s),this._updateChildren()}return this},swapChildren:function(s,n){var i=this.children,t=this.getChildIndex(s),r=this.getChildIndex(n);s.depth=r,i[r]=s,n.depth=t,i[t]=n},swapChildrenAt:function(s,n){var i=this.children,t=this.getChildAt(s),r=this.getChildAt(n);t.depth=n,i[n]=t,r.depth=s,i[s]=r},sortChildren:function(s){var n=s,i=this.children;if(typeof n=="string"){var t=n;n=function(r,e){return e[t]-r[t]}}i.sort(n),this._updateChildren()},_updateChildren:function(s,n){var i=this.children,t;s=s||0,n=n||i.length;for(var r=s;r<n;r++)t=i[r],t.depth=r+1,t.parent=this},contains:function(s){for(;s=s.parent;)if(s===this)return!0;return!1},getViewAtPoint:function(s,n,i,t,r){for(var e=t?[]:null,a=this.children,o,l,c=a.length-1;c>=0;c--)if(o=a[c],!(!o||!o.visible||o.alpha<=0||r&&!o.pointerEnabled)){if(o.children&&o.children.length&&!(r&&!o.pointerChildren)&&(l=o.getViewAtPoint(s,n,i,t,r)),l)if(t)l.length&&(e=e.concat(l));else return l;else if(o.hitTestPoint(s,n,i))if(t)e.push(o);else return o}return t&&e.length?e:null},render:function(s,n){h.superclass.render.call(this,s,n);var i=this.children.slice(0),t,r,e;for(t=0,r=i.length;t<r;t++)e=i[t],e.parent===this&&e._render(s,n)}});u.Hilo.Container=h})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.Container,h=u.Hilo.CanvasRenderer,s=u.Hilo.DOMRenderer,n=u.Hilo.WebGLRenderer,i=u.Hilo.browser,t=u.Hilo.util,r=y.create({Extends:v,constructor:function(e){e=e||{},this.id=this.id||e.id||x.getUid("Stage"),r.superclass.constructor.call(this,e),this._initRenderer(e);var a=this.width,o=this.height,l=this.updateViewport();e.width||(a=l&&l.width||320),e.height||(o=l&&l.height||480),this.resize(a,o,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(e){var a=e.canvas,o=e.container,l=e.renderType||"canvas";if(typeof a=="string"&&(a=x.getElement(a)),typeof o=="string"&&(o=x.getElement(o)),a)a.getContext||(l="dom");else{var c=l==="dom"?"div":"canvas";a=x.createElement(c,{style:{position:"absolute"}})}this.canvas=a,o&&o.appendChild(a);var d={canvas:a,stage:this};switch(l){case"dom":this.renderer=new s(d);break;case"webgl":n.isSupport()?this.renderer=new n(d):this.renderer=new h(d);break;case"canvas":default:this.renderer=new h(d);break}},addTo:function(e){var a=this.canvas;return a.parentNode!==e&&e.appendChild(a),this},tick:function(e){this.paused||this._render(this.renderer,e)},enableDOMEvent:function(e,a){var o=this,l=o.canvas,c=o._domListener||(o._domListener=function(_){o._onDOMEvent(_)});e=typeof e=="string"?[e]:e,a=a!==!1;for(var d=0;d<e.length;d++){var g=e[d];a?l.addEventListener(g,c,!1):l.removeEventListener(g,c)}return o},_onDOMEvent:function(e){var a=e.type,o=e,l=a.indexOf("touch")==0,c=e;if(l){var d=e.touches,g=e.changedTouches;c=d&&d.length?d[0]:g&&g.length?g[0]:null}var _=c.pageX||c.clientX,m=c.pageY||c.clientY,T=this.viewport||this.updateViewport();o.stageX=_=(_-T.left)/this.scaleX,o.stageY=m=(m-T.top)/this.scaleY,o.stopPropagation=function(){this._stopPropagationed=!0};var p=this.getViewAtPoint(_,m,!0,!1,!0)||this,f=this.canvas,b=this._eventTarget,C=a==="mouseout";if(b&&(b!=p&&(!b.contains||!b.contains(p))||C)){var E=a==="touchmove"?"touchout":a==="mousemove"||C||!p?"mouseout":null;if(E){var H=t.copy({},o);H.type=E,H.eventTarget=b,b._fireMouseEvent(H)}o.lastEventTarget=b,this._eventTarget=null}if(p&&p.pointerEnabled&&a!=="mouseout"&&(o.eventTarget=this._eventTarget=p,p._fireMouseEvent(o)),!l){var S=p&&p.pointerEnabled&&p.useHandCursor?"pointer":"";f.style.cursor=S}i.android&&a==="touchmove"&&e.preventDefault()},updateViewport:function(){var e=this.canvas,a=null;return e.parentNode&&(a=this.viewport=x.getElementRect(e)),a},resize:function(e,a,o){(o||this.width!==e||this.height!==a)&&(this.width=e,this.height=a,this.renderer.resize(e,a),this.updateViewport())}});u.Hilo.Stage=r})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.Drawable,s=y.create({Extends:v,constructor:function(n){if(n=n||{},this.id=this.id||n.id||x.getUid("Bitmap"),s.superclass.constructor.call(this,n),this.drawable=new h(n),!this.width||!this.height){var i=this.drawable.rect;i&&(this.width=i[2],this.height=i[3])}},setImage:function(n,i,t){return this.drawable.init({image:n,rect:i,crossOrigin:t}),i?(this.width=i[2],this.height=i[3]):!this.width&&!this.height&&(i=this.drawable.rect,i&&(this.width=i[2],this.height=i[3])),this}});u.Hilo.Bitmap=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.Drawable,s=y.create({Extends:v,constructor:function(n){n=n||{},this.id=this.id||n.id||x.getUid("Sprite"),s.superclass.constructor.call(this,n),this._frames=[],this._frameNames={},this.drawable=new h,n.frames&&this.addFrame(n.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(n,i){var t=i??this._frames.length;if(n instanceof Array)for(var r=0,e=n.length;r<e;r++)this.setFrame(n[r],t+r);else this.setFrame(n,t);return this},setFrame:function(n,i){var t=this._frames,r=t.length;return i=i<0?0:i>r?r:i,t[i]=n,n.name&&(this._frameNames[n.name]=n),(i==0&&!this.width||!this.height)&&(this.width=n.rect[2],this.height=n.rect[3]),this},getFrame:function(n){if(typeof n=="number"){var i=this._frames;return n<0||n>=i.length?null:i[n]}return this._frameNames[n]},getFrameIndex:function(n){var i=this._frames,t=i.length,r=-1;if(typeof n=="number")r=n;else{var e=typeof n=="string"?this._frameNames[n]:n;if(e){for(var a=0;a<t;a++)if(e===i[a]){r=a;break}}}return r},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},goto:function(n,i){var t=this._frames.length,r=this.getFrameIndex(n);return this.currentFrame=r<0?0:r>=t?t-1:r,this.paused=i,this._firstRender=!0,this},_render:function(n,i){var t=this.currentFrame,r;if(this._firstRender?(r=t,this._firstRender=!1):r=this._nextFrame(i),r!=t){this.currentFrame=r;var e=this._frames[r].callback;e&&e.call(this)}this.onEnterFrame&&this.onEnterFrame(r),this.drawable.init(this._frames[r]),s.superclass._render.call(this,n,i)},_nextFrame:function(n){var i=this._frames,t=i.length,r=this.currentFrame,e=i[r],a=e.duration||this.interval,o=this._frameElapsed,l=r==0&&!this.drawable?0:o+(this.timeBased?n:1);return o=this._frameElapsed=l<a?l:0,(e.stop||!this.loop&&r>=t-1)&&this.stop(),!this.paused&&o==0&&(e.next!=null?r=this.getFrameIndex(e.next):r>=t-1?r=0:this.drawable&&r++),r},setFrameCallback:function(n,i){return n=this.getFrame(n),n&&(n.callback=i),this},onEnterFrame:null});u.Hilo.Sprite=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.Drawable,s=y.create({Extends:v,constructor:function(n){n=n||{},this.id=this.id||n.id||x.getUid("DOMElement"),s.superclass.constructor.call(this,n),this.drawable=new h;var i=this.drawable.domElement=n.element||x.createElement("div");i.id=this.id,this.pointerEnabled&&!i.style.pointerEvents&&(i.style.pointerEvents="visible")},_render:function(n,i){(!this.onUpdate||this.onUpdate(i)!==!1)&&(n.transform(this),this.visible&&this.alpha>0&&this.render(n,i))},render:function(n,i){if(n.renderType!=="dom"){var t=n.canvas,r=this.parent,e=n._domElementContainer;n._domElementContainer||(e=n._domElementContainer=x.createElement("div",{style:{position:"absolute",transform:"scale3d("+r.scaleX+","+r.scaleY+", 1)",transformOrigin:"0 0",zIndex:"1"}}),t.parentNode.insertBefore(n._domElementContainer,t.nextSibling));var a=this.drawable.domElement,o=this.depth,l=e.childNodes[0],c;if(a.parentNode)return;for(;l&&l.nodeType!=3&&(c=parseInt(l.style.zIndex)||0,!(c<=0||c>o));)l=l.nextSibling;e.insertBefore(this.drawable.domElement,l)}else n.draw(this)}});u.Hilo.DOMElement=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.CacheMixin,s=(function(){var n=document.createElement("canvas"),i=n.getContext&&n.getContext("2d");return y.create({Extends:v,Mixes:h,constructor:function(t){t=t||{},this.id=this.id||t.id||x.getUid("Graphics"),s.superclass.constructor.call(this,t),this._actions=[]},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(t,r,e,a,o,l){var c=this,d=c._addAction;return d.call(c,["lineWidth",c.lineWidth=t||1]),d.call(c,["strokeStyle",c.strokeStyle=r||"0"]),d.call(c,["lineAlpha",c.lineAlpha=e||1]),a!=null&&d.call(c,["lineCap",c.lineCap=a]),o!=null&&d.call(c,["lineJoin",c.lineJoin=o]),l!=null&&d.call(c,["miterLimit",c.miterLimit=l]),c.hasStroke=!0,c},setLineDash:function(t){return this._addAction(["setLineDash",t])},beginFill:function(t,r){var e=this,a=e._addAction;return a.call(e,["fillStyle",e.fillStyle=t]),a.call(e,["fillAlpha",e.fillAlpha=r||1]),e.hasFill=!0,e},endFill:function(){var t=this,r=t._addAction;return t.hasStroke&&r.call(t,["stroke"]),t.hasFill&&r.call(t,["fill"]),t.setCacheDirty(!0),t},beginLinearGradientFill:function(t,r,e,a,o,l){for(var c=this,d=i.createLinearGradient(t,r,e,a),g=0,_=o.length;g<_;g++)d.addColorStop(l[g],o[g]);return c.hasFill=!0,c._addAction(["fillStyle",c.fillStyle=d])},beginRadialGradientFill:function(t,r,e,a,o,l,c,d){for(var g=this,_=i.createRadialGradient(t,r,e,a,o,l),m=0,T=c.length;m<T;m++)_.addColorStop(d[m],c[m]);return g.hasFill=!0,g._addAction(["fillStyle",g.fillStyle=_])},beginBitmapFill:function(t,r){var e=this,a=i.createPattern(t,r||"");return e.hasFill=!0,e._addAction(["fillStyle",e.fillStyle=a])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(t,r){return this._addAction(["moveTo",t,r])},lineTo:function(t,r){return this._addAction(["lineTo",t,r])},quadraticCurveTo:function(t,r,e,a){return this._addAction(["quadraticCurveTo",t,r,e,a])},bezierCurveTo:function(t,r,e,a,o,l){return this._addAction(["bezierCurveTo",t,r,e,a,o,l])},drawRect:function(t,r,e,a){return this._addAction(["rect",t,r,e,a])},drawRoundRectComplex:function(t,r,e,a,o,l,c,d){var g=this,_=g._addAction;return _.call(g,["moveTo",t+o,r]),_.call(g,["lineTo",t+e-l,r]),_.call(g,["arc",t+e-l,r+l,l,-Math.PI/2,0,!1]),_.call(g,["lineTo",t+e,r+a-c]),_.call(g,["arc",t+e-c,r+a-c,c,0,Math.PI/2,!1]),_.call(g,["lineTo",t+d,r+a]),_.call(g,["arc",t+d,r+a-d,d,Math.PI/2,Math.PI,!1]),_.call(g,["lineTo",t,r+o]),_.call(g,["arc",t+o,r+o,o,Math.PI,Math.PI*3/2,!1]),g},drawRoundRect:function(t,r,e,a,o){return this.drawRoundRectComplex(t,r,e,a,o,o,o,o)},drawCircle:function(t,r,e){return this._addAction(["arc",t+e,r+e,e,0,Math.PI*2,0])},drawEllipse:function(t,r,e,a){var o=this;if(e==a)return o.drawCircle(t,r,e);var l=o._addAction,c=e/2,d=a/2,g=.5522847498307933,_=g*c,m=g*d;return t=t+c,r=r+d,l.call(o,["moveTo",t+c,r]),l.call(o,["bezierCurveTo",t+c,r-m,t+_,r-d,t,r-d]),l.call(o,["bezierCurveTo",t-_,r-d,t-c,r-m,t-c,r]),l.call(o,["bezierCurveTo",t-c,r+m,t-_,r+d,t,r+d]),l.call(o,["bezierCurveTo",t+_,r+d,t+c,r+m,t+c,r]),o},drawSVGPath:function(t){var r=this,e=r._addAction,a=t.replace(/,/g," ").replace(/-/g," -").split(/(?=[a-zA-Z])/);e.call(r,["beginPath"]);for(var o={x:0,y:0},l={x:0,y:0},c,d=0,g=a.length;d<g;d++){var _=a[d];if(_.length){var m=_[0],T=m.toUpperCase(),p=this._getSVGParams(_),f=T!==m;switch(T){case"M":f&&this._convertToAbsolute(o,p),e.call(r,["moveTo",p[0],p[1]]),this._setCurrentPoint(o,p[0],p[1]);break;case"L":f&&this._convertToAbsolute(o,p),e.call(r,["lineTo",p[0],p[1]]),this._setCurrentPoint(o,p[0],p[1]);break;case"H":f&&(p[0]+=o.x),e.call(r,["lineTo",p[0],o.y]),o.x=p[0];break;case"V":f&&(p[0]+=o.y),e.call(r,["lineTo",o.x,p[0]]),o.y=p[0];break;case"Z":e.call(r,["closePath"]);break;case"C":f&&this._convertToAbsolute(o,p),e.call(r,["bezierCurveTo",p[0],p[1],p[2],p[3],p[4],p[5]]),l.x=p[2],l.y=p[3],this._setCurrentPoint(o,p[4],p[5]);break;case"S":f&&this._convertToAbsolute(o,p),c==="C"||c==="S"?b=this._getReflectionPoint(o,l):b=o,e.call(r,["bezierCurveTo",b.x,b.y,p[0],p[1],p[2],p[3]]),l.x=p[0],l.y=p[1],this._setCurrentPoint(o,p[2],p[3]);break;case"Q":f&&this._convertToAbsolute(o,p),e.call(r,["quadraticCurveTo",p[0],p[1],p[2],p[3]]),l.x=p[0],l.y=p[1],this._setCurrentPoint(o,p[2],p[3]);break;case"T":f&&this._convertToAbsolute(o,p);var b;c==="Q"||c==="T"?b=this._getReflectionPoint(o,l):b=o,e.call(r,["quadraticCurveTo",b.x,b.y,p[0],p[1]]),l=b,this._setCurrentPoint(o,p[0],p[1]);break}c=T}}return r},_getSVGParams:function(t){var r=t.substring(1).replace(/[\s]+$|^[\s]+/g,"").split(/[\s]+/);r[0].length==0&&r.shift();for(var e=0,a=r.length;e<a;e++)r[e]=parseFloat(r[e]);return r},_convertToAbsolute:function(t,r){for(var e=0,a=r.length;e<a;e++)e%2===0?r[e]+=t.x:r[e]+=t.y},_setCurrentPoint:function(t,r,e){t.x=r,t.y=e},_getReflectionPoint:function(t,r){return{x:t.x*2-r.x,y:t.y*2-r.y}},_draw:function(t){var r=this,e=r._actions,a=e.length,o;for(t.beginPath(),o=0;o<a;o++){var l=e[o],c=l[0],d=l.length>1?l.slice(1):null;typeof t[c]=="function"?t[c].apply(t,d):t[c]=l[1]}},render:function(t,r){var e=this;t.renderType==="canvas"?e._draw(t.context):(e.cache(),t.draw(e))},clear:function(){var t=this;return t._actions.length=0,t.lineWidth=1,t.lineAlpha=1,t.lineCap=null,t.lineJoin=null,t.miterLimit=10,t.hasStroke=!1,t.strokeStyle="0",t.hasFill=!1,t.fillStyle="0",t.fillAlpha=1,t.setCacheDirty(!0),t},_addAction:function(t){var r=this;return r._actions.push(t),r}})})();u.Hilo.Graphics=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo,v=u.Hilo.View,h=u.Hilo.CacheMixin,s=x.create({Extends:v,Mixes:h,constructor:function(n){n=n||{},this.id=this.id||n.id||y.getUid("Text"),s.superclass.constructor.call(this,n),n.font||(this.font="12px arial"),this._fontHeight=s.measureFontHeight(this.font)},text:"",color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(n){var i=this;return i.font!==n&&(i.font=n,i._fontHeight=s.measureFontHeight(n)),i},render:function(n,i){var t=this;if(n.renderType==="canvas")this.drawable?n.draw(t):t._draw(n.context);else if(n.renderType==="dom"){var r=t.drawable,e=r.domElement,a=e.style;a.font=t.font,a.textAlign=t.textAlign,a.color=t.color,a.width=t.width+"px",a.height=t.height+"px",a.lineHeight=t._fontHeight+t.lineSpacing+"px",e.innerHTML=t.text,n.draw(this)}else t.cache(),n.draw(t)},_draw:function(n){var i=this,t=i.text.toString();if(t){n.font=i.font,n.textAlign=i.textAlign,n.textBaseline="top";var r=t.split(/\r\n|\r|\n|<br(?:[ \/])*>/),e=0,a=0,o=i._fontHeight+i.lineSpacing,l,c,d,g,_,m=[];for(l=0,g=r.length;l<g;l++){if(c=r[l],d=n.measureText(c).width,d<=i.maxWidth){m.push({text:c,y:a}),e<d&&(e=d),a+=o;continue}var T="",p=0,f,b,C;for(b=0,_=c.length;b<_;b++)C=c[b],f=n.measureText(T+C).width,f>i.maxWidth?(m.push({text:T,y:a}),e<p&&(e=p),a+=o,T=C):(p=f,T+=C),b==_-1&&(m.push({text:T,y:a}),T!==C&&e<f&&(e=f),a+=o)}i.textWidth=e,i.textHeight=a,i.width||(i.width=e),i.height||(i.height=a);var E=0;switch(i.textVAlign){case"middle":E=i.height-i.textHeight>>1;break;case"bottom":E=i.height-i.textHeight;break}var H=i.background;for(H&&(n.fillStyle=H,n.fillRect(0,0,i.width,i.height)),i.outline?n.strokeStyle=i.color:n.fillStyle=i.color,l=0;l<m.length;l++)c=m[l],i._drawTextLine(n,c.text,E+c.y)}},_drawTextLine:function(n,i,t){var r=this,e=0,a=r.width;switch(r.textAlign){case"center":e=a>>1;break;case"right":case"end":e=a;break}r.outline?n.strokeText(i,e,t):n.fillText(i,e,t)},Statics:{measureFontHeight:function(n){var i=document.documentElement,t,r=y.createElement("div",{style:{font:n,position:"absolute"},innerHTML:"M"});return i.appendChild(r),t=r.offsetHeight,i.removeChild(r),t}}});u.Hilo.Text=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo,v=u.Hilo.Container,h=u.Hilo.Bitmap,s=x.create({Extends:v,constructor:function(n){n=n||{},this.id=this.id||n.id||y.getUid("BitmapText"),s.superclass.constructor.call(this,n);var i=n.text+"";i&&(this.text="",this.setText(i)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(n){var i=this,t=n.toString(),r=t.length;if(i.text!=t){i.text=t;var e,a,o,l,c=0,d=0,g=0;for(e=0;e<r;e++)a=t.charAt(e),o=i.glyphs[a],o&&(g=c+(c>0?i.letterSpacing:0),i.children[e]?(l=i.children[e],l.setImage(o.image,o.rect)):(l=i._createBitmap(o),i.addChild(l)),l.x=g,c=g+o.rect[2],d=Math.max(d,o.rect[3]));for(e=i.children.length-1;e>=r;e--)i._releaseBitmap(i.children[e]),i.children[e].removeFromParent();return i.width=c,i.height=d,this.setTextAlign(),i}},_createBitmap:function(n){var i;return s._pool.length?(i=s._pool.pop(),i.setImage(n.image,n.rect)):i=new h({image:n.image,rect:n.rect}),i},_releaseBitmap:function(n){s._pool.push(n)},setTextAlign:function(n){switch(this.textAlign=n||this.textAlign,this.textAlign){case"center":this.pivotX=this.width*.5;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0;break}return this},hasGlyphs:function(n){var i=this.glyphs;if(!i)return!1;n=n.toString();var t=n.length,r;for(r=0;r<t;r++)if(!i[n.charAt(r)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(n,i,t,r){var e=n.toString();t=t||e.length,r=r||1;for(var a=i.width/t,o=i.height/r,l={},c=0,d=n.length;c<d;c++){var g=e.charAt(c);l[g]={image:i,rect:[a*(c%t),o*Math.floor(c/t),a,o]}}return l}}});u.Hilo.BitmapText=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.Drawable,s=u.Hilo.util,n=y.create({Extends:v,constructor:function(i){i=i||{},this.id=this.id||i.id||x.getUid("Button"),n.superclass.constructor.call(this,i),this.drawable=new h(i),this.setState(n.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(i){return this.enabled!=i&&(i?this.setState(n.UP):this.setState(n.DISABLED)),this},setState:function(i){if(this.state!==i){this.state=i,this.pointerEnabled=this.enabled=i!==n.DISABLED;var t;switch(i){case n.UP:t=this.upState;break;case n.OVER:t=this.overState;break;case n.DOWN:t=this.downState;break;case n.DISABLED:t=this.disabledState;break}t&&(this.drawable.init(t),s.copy(this,t,!0))}return this},fire:function(i,t){if(this.enabled){var r=typeof i=="string"?i:i.type;switch(r){case"mousedown":case"touchstart":case"touchmove":this.setState(n.DOWN);break;case"mouseover":this.setState(n.OVER);break;case"mouseup":this.overState?this.setState(n.OVER):this.upState&&this.setState(n.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(n.UP);break}return n.superclass.fire.call(this,i,t)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});u.Hilo.Button=n})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=(function(){return x.create({constructor:function(i){this._frames=v(i),this._sprites=h(i,this._frames)},_frames:null,_sprites:null,getFrame:function(i){var t=this._frames;return t&&t[i]},getSprite:function(i){var t=this._sprites;return t&&t[i]},Statics:{createSpriteFrames:function(i,t,r,e,a,o,l){var c,d;if(Object.prototype.toString.call(i)==="[object Array]"){var g=[];for(c=0,d=i.length;c<d;c++)g=g.concat(this.createSpriteFrames.apply(this,i[c]));return g}else{if(typeof t=="string"){var _=t.split(",");t=[];for(var m=0,T=_.length;m<T;m++){var p=_[m].split("-");if(p.length==1)t.push(parseInt(p[0]));else for(c=parseInt(p[0]),d=parseInt(p[1]);c<=d;c++)t.push(c)}}var f=Math.floor(r.width/e);for(c=0;c<t.length;c++){var b=t[c];t[c]={rect:[e*(b%f),a*Math.floor(b/f),e,a],image:r,duration:l}}return t[0].name=i,o?t[t.length-1].next=i:t[t.length-1].stop=!0,t}}}});function v(i){var t,r,e=i.frames;if(!e)return null;var a=[],o;if(e instanceof Array)for(t=0,r=e.length;t<r;t++)o=e[t],a[t]={image:i.image,rect:o};else{var l=e.frameWidth,c=e.frameHeight,d=i.width/l|0,g=i.height/c|0,_=e.numFrames||d*g;for(t=0;t<_;t++)a[t]={image:i.image,rect:[t%d*l,(t/d|0)*c,l,c]}}return a}function h(i,t){var r,e,a=i.sprites;if(!a)return null;var o={},l,c,d;for(var g in a){if(l=a[g],n(l))c=s(t[l]);else if(l instanceof Array)for(c=[],r=0,e=l.length;r<e;r++){var _=l[r],m;n(_)?d=s(t[_]):(m=_.rect,n(m)&&(m=t[_.rect]),d=s(m,_)),c[r]=d}else for(c=[],r=l.from;r<=l.to;r++)c[r-l.from]=s(t[r],l[r]);o[g]=c}return o}function s(i,t){var r={image:i.image,rect:i.rect};return t&&(r.name=t.name||null,r.duration=t.duration||0,r.stop=!!t.stop,r.next=t.next||null),r}function n(i){return typeof i=="number"}})();u.Hilo.TextureAtlas=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.browser,v=x.create({constructor:function(h){this._targetFPS=h||60,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(h){if(h===void 0&&(h=!0),!this._intervalId){this._lastTime=+new Date;var s=this,n=this._interval,i=u.requestAnimationFrame||u[y.jsVendor+"RequestAnimationFrame"],t;h&&i&&n<17?(this._useRAF=!0,t=function(){s._intervalId=i(t),s._tick()}):t=function(){s._intervalId=setTimeout(t,n),s._tick()},this._paused=!1,t()}},stop:function(){if(this._useRAF){var h=u.cancelAnimationFrame||u[y.jsVendor+"CancelAnimationFrame"];h(this._intervalId)}else clearTimeout(this._intervalId);this._intervalId=null,this._lastTime=0,this._paused=!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var h=+new Date,s=h-this._lastTime,n=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=h-this._lastTime,this._lastTime=h;for(var i=n.slice(0),t=0,r=i.length;t<r;t++)i[t].tick(s)}},getMeasuredFPS:function(){return Math.min(this._measuredFPS,this._targetFPS)},addTick:function(h){if(!h||typeof h.tick!="function")throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(h)},removeTick:function(h){var s=this._tickers,n=s.indexOf(h);n>=0&&s.splice(n,1)},nextTick:function(h){var s=this,n={tick:function(i){s.removeTick(n),h()}};return s.addTick(n),n},timeout:function(h,s){var n=this,i=new Date().getTime()+s,t={tick:function(){var r=new Date().getTime(),e=r-i;e>=0&&(n.removeTick(t),h())}};return n.addTick(t),t},interval:function(h,s){var n=this,i=new Date().getTime()+s,t={tick:function(){var r=new Date().getTime(),e=r-i;e>=0&&(e<s&&(r-=e),i=r+s,h())}};return n.addTick(t),t}});u.Hilo.Ticker=v})(window),(function(u){u.Hilo||(u.Hilo={});var x=Array.prototype,y=x.slice;x.indexOf||(x.indexOf=function(h,s){s=s||0;var n=this.length,i;if(n==0||s>=n)return-1;for(s<0&&(s=n+s),i=s;i<n;i++)if(this[i]===h)return i;return-1});var v=Function.prototype;v.bind||(v.bind=function(h){var s=this,n=y.call(arguments,1),i=function(){};function t(){var r=n.concat(y.call(arguments));return s.apply(this instanceof t?this:h,r)}return i.prototype=s.prototype,t.prototype=new i,t}),u.Hilo.undefined=void 0})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y={_isDragStart:!1,dragNeedTransform:!1,startDrag:function(v){var h=this;h._isDragStart&&h.stopDrag(),h._isDragStart=!0;var s;v=v||[-1/0,-1/0,1/0,1/0];var n={x:0,y:0,preX:0,preY:0},i=v[0],t=v[1],r=v[2]==1/0?1/0:i+v[2],e=v[3]==1/0?1/0:t+v[3],a={x:0,y:0};function o(_){_.stopPropagation(),d(_),h.off(x.event.POINTER_START,o),a.x=h.x,a.y=h.y,h.dragNeedTransform&&h.parent&&h.parent.getConcatenatedMatrix().transformPoint(a),h.__dragX=a.x-n.x,h.__dragY=a.y-n.y,s||(s=h.getStage()),s.on(x.event.POINTER_MOVE,c),document.addEventListener(x.event.POINTER_END,l),h.fire("dragStart",n)}function l(_){document.removeEventListener(x.event.POINTER_END,l),s&&s.off(x.event.POINTER_MOVE,c),h.on(x.event.POINTER_START,o),h.fire("dragEnd",n)}function c(_){d(_),a.x=n.x+h.__dragX,a.y=n.y+h.__dragY,h.dragNeedTransform&&h.parent&&h.parent.getConcatenatedMatrix().invert().transformPoint(a),h.x=Math.max(i,Math.min(r,a.x)),h.y=Math.max(t,Math.min(e,a.y)),h.fire("dragMove",n)}function d(_){n.preX=n.x,n.preY=n.y,n.x=_.stageX,n.y=_.stageY}function g(){h._isDragStart=!1,document.removeEventListener(x.event.POINTER_END,l),s&&s.off(x.event.POINTER_MOVE,c),h.off(x.event.POINTER_START,o)}h.on(x.event.POINTER_START,o),h.stopDrag=g},stopDrag:function(){this._isDragStart=!1}};u.Hilo.drag=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=(function(){function v(){return+new Date}return x.create({constructor:function(h,s,n,i){var t=this;t.target=h,t._startTime=0,t._seekTime=0,t._pausedTime=0,t._pausedStartTime=0,t._reverseFlag=1,t._repeatCount=0,arguments.length==3&&(i=n,n=s,s=null);for(var r in i)t[r]=i[r];t._fromProps=s,t._toProps=n,!i.duration&&i.time&&(t.duration=i.time||0,t.time=0)},target:null,duration:1e3,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,isStart:!1,isComplete:!1,onStart:null,onUpdate:null,onComplete:null,setProps:function(h,s){var n=this,i=n.target,t=h||s,r=n._fromProps={},e=n._toProps={};h=h||i,s=s||i;for(var a in t)e[a]=s[a]||0,i[a]=r[a]=h[a]||0;return n},start:function(){var h=this;return h._startTime=v()+h.delay,h._seekTime=0,h._pausedTime=0,h._reverseFlag=1,h._repeatCount=0,h.paused=!1,h.isStart=!1,h.isComplete=!1,y.add(h),h},stop:function(){return y.remove(this),this},pause:function(){var h=this;return h.paused=!0,h._pausedStartTime=v(),h},resume:function(){var h=this;return h.paused=!1,h._pausedStartTime&&(h._pausedTime+=v()-h._pausedStartTime),h._pausedStartTime=0,h},seek:function(h,s){var n=this,i=v();return n._startTime=i,n._seekTime=h,n._pausedTime=0,s!==void 0&&(n.paused=s),n._update(i,!0),y.add(n),n},link:function(h){var s=this,n=h.delay,i=s._startTime,t,r;return typeof n=="string"&&(t=n.indexOf("+")==0,r=n.indexOf("-")==0,n=t||r?Number(n.substr(1))*(t?1:-1):Number(n)),h.delay=n,h._startTime=t||r?i+s.duration+n:i+n,s._next=h,y.remove(h),h},_render:function(h){var s=this,n=s.target,i=s._fromProps,t;for(t in i)n[t]=i[t]+(s._toProps[t]-i[t])*h},_update:function(h,s){var n=this;if(!(n.paused&&!s)){if(n.isComplete)return!0;var i=h-n._startTime-n._pausedTime+n._seekTime;if(!(i<0)){var t=i/n.duration,r;t=t<=0?0:t>=1?1:t;var e=n.ease?n.ease(t):t;n.reverse&&n.isStart&&(n._reverseFlag<0&&(t=1-t,e=1-e),t<1e-7&&(n.repeat>0&&n._repeatCount++>=n.repeat||n.repeat==0&&!n.loop?n.isComplete=!0:(n._startTime=v(),n._pausedTime=0,n._reverseFlag*=-1))),n.isStart||(n.setProps(n._fromProps,n._toProps),n.isStart=!0,n.onStart&&n.onStart.call(n,n)),n.time=i,n._render(e),(r=n.onUpdate)&&r.call(n,e,n),t>=1&&(n.reverse?(n._startTime=v(),n._pausedTime=0,n._reverseFlag*=-1):n.loop||n.repeat>0&&n._repeatCount++<n.repeat?(n._startTime=v()+n.repeatDelay,n._pausedTime=0):n.isComplete=!0);var a=n._next;if(a&&a.time<=0){var o=a._startTime;o>0&&o<=h?(a._render(t),a.time=i,y.add(a)):n.isComplete&&(o<0||o>h)&&a.start()}if(n.isComplete)return(r=n.onComplete)&&r.call(n,n),!0}}},Statics:{_tweens:[],tick:function(){var h=y._tweens,s,n,i=h.length;for(n=0;n<i;n++)s=h[n],s&&s._update(v())&&(h.splice(n,1),n--);return y},add:function(h){var s=y._tweens;return s.indexOf(h)==-1&&s.push(h),y},remove:function(h){var s,n;if(h instanceof Array){for(s=0,n=h.length;s<n;s++)y.remove(h[s]);return y}var i=y._tweens;if(h instanceof y)s=i.indexOf(h),s>-1&&i.splice(s,1);else for(s=0;s<i.length;s++)i[s].target===h&&(i.splice(s,1),s--);return y},removeAll:function(){return y._tweens.length=0,y},fromTo:function(h,s,n,i){i=i||{};var t=h instanceof Array;h=t?h:[h];var r,e,a=i.stagger,o=[];for(e=0;e<h.length;e++)r=new y(h[e],s,n,i),a&&(r.delay=(i.delay||0)+(e*a||0)),r.start(),o.push(r);return t?o:r},to:function(h,s,n){return y.fromTo(h,null,s,n)},from:function(h,s,n){return y.fromTo(h,s,null,n)}}})})();u.Hilo.Tween=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=(function(){function y(f,b,C,E,H){return f=f||{},b&&(f.EaseIn=b),C&&(f.EaseOut=C),E&&(f.EaseInOut=E),H&&(f.EaseNone=H),f}var v=y(null,null,null,null,function(f){return f}),h=y(null,function(f){return f*f},function(f){return-f*(f-2)},function(f){return(f*=2)<1?.5*f*f:-.5*(--f*(f-2)-1)}),s=y(null,function(f){return f*f*f},function(f){return--f*f*f+1},function(f){return(f*=2)<1?.5*f*f*f:.5*((f-=2)*f*f+2)}),n=y(null,function(f){return f*f*f*f},function(f){return-(--f*f*f*f-1)},function(f){return(f*=2)<1?.5*f*f*f*f:-.5*((f-=2)*f*f*f-2)}),i=y(null,function(f){return f*f*f*f*f},function(f){return(f=f-1)*f*f*f*f+1},function(f){return(f*=2)<1?.5*f*f*f*f*f:.5*((f-=2)*f*f*f*f+2)}),t=Math,r=t.PI,e=r*.5,a=t.sin,o=t.cos,l=t.pow,c=t.sqrt,d=y(null,function(f){return-o(f*e)+1},function(f){return a(f*e)},function(f){return-.5*(o(r*f)-1)}),g=y(null,function(f){return f==0?0:l(2,10*(f-1))},function(f){return f==1?1:-l(2,-10*f)+1},function(f){return f==0||f==1?f:(f*=2)<1?.5*l(2,10*(f-1)):.5*(-l(2,-10*(f-1))+2)}),_=y(null,function(f){return-(c(1-f*f)-1)},function(f){return c(1- --f*f)},function(f){return(f/=.5)<1?-.5*(c(1-f*f)-1):.5*(c(1-(f-=2)*f)+1)}),m=y({a:1,p:.4,s:.1,config:function(f,b){m.a=f,m.p=b,m.s=b/(2*r)*Math.asin(1/f)||0}},function(f){return-(m.a*l(2,10*(f-=1))*a((f-m.s)*(2*r)/m.p))},function(f){return m.a*l(2,-10*f)*a((f-m.s)*(2*r)/m.p)+1},function(f){return(f*=2)<1?-.5*(m.a*l(2,10*(f-=1))*a((f-m.s)*(2*r)/m.p)):m.a*l(2,-10*(f-=1))*a((f-m.s)*(2*r)/m.p)*.5+1}),T=y({o:1.70158,s:2.59491,config:function(f){T.o=f,T.s=f*1.525}},function(f){return f*f*((T.o+1)*f-T.o)},function(f){return(f=f-1)*f*((T.o+1)*f+T.o)+1},function(f){return(f*=2)<1?.5*(f*f*((T.s+1)*f-T.s)):.5*((f-=2)*f*((T.s+1)*f+T.s)+2)}),p=y(null,function(f){return 1-p.EaseOut(1-f)},function(f){return(f/=1)<.36364?7.5625*f*f:f<.72727?7.5625*(f-=.54545)*f+.75:f<.90909?7.5625*(f-=.81818)*f+.9375:7.5625*(f-=.95455)*f+.984375},function(f){return f<.5?p.EaseIn(f*2)*.5:p.EaseOut(f*2-1)*.5+.5});return{Linear:v,Quad:h,Cubic:s,Quart:n,Quint:i,Sine:d,Expo:g,Circ:_,Elastic:m,Back:T,Bounce:p}})();u.Hilo.Ease=x})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=x.create({load:function(v){var h=this,s=new Image;v.crossOrigin&&(s.crossOrigin="Anonymous"),s.onload=function(){h.onLoad(s)},s.onerror=s.onabort=h.onError.bind(s),s.src=v.src+(v.noCache?(v.src.indexOf("?")==-1?"?":"&")+"t="+ +new Date:"")},onLoad:function(v){return v.onload=v.onerror=v.onabort=null,v},onError:function(v){var h=v.target;return h.onload=h.onerror=h.onabort=null,v}});u.Hilo.ImageLoader=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=x.create({load:function(v){var h=this,s=v.src,n=v.type=="jsonp";if(n){var i=v.callbackName||"callback",t=v.callback||"jsonp"+ ++y._count,r=u;r[t]||(r[t]=function(a){delete r[t]}),s+=(s.indexOf("?")==-1?"?":"&")+i+"="+t}v.noCache&&(s+=(s.indexOf("?")==-1?"?":"&")+"t="+ +new Date);var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=h.onLoad.bind(h),e.onerror=h.onError.bind(h),e.src=s,v.id&&(e.id=v.id),document.getElementsByTagName("head")[0].appendChild(e)},onLoad:function(v){var h=v.target;return h.onload=h.onerror=null,h},onError:function(v){var h=v.target;return h.onload=h.onerror=null,v},Statics:{_count:0}});u.Hilo.ScriptLoader=y})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.EventMixin,v=u.Hilo.ImageLoader,h=u.Hilo.ScriptLoader,s=x.create({Mixes:y,constructor:function(i){this._source=[],this.add(i)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(i){var t=this;return i&&(i=i instanceof Array?i:[i],t._source=t._source.concat(i)),t},get:function(i){if(i)for(var t=this._source,r=0;r<t.length;r++){var e=t[r];if(e.id===i||e.src===i)return e}return null},getContent:function(i){var t=this.get(i);return t&&t.content},removeContent:function(i){if(i)for(var t=this._source,r=0;r<t.length;r++){var e=t[r];if(e.id===i||e.src===i){t.splice(r,1);return}}},start:function(){var i=this;return i._loadNext(),i},_loadNext:function(){var i=this,t=i._source,r=t.length;if(i._loaded>=r){i.fire("complete");return}if(i._currentIndex<r-1&&i._connections<i.maxConnections){var e=++i._currentIndex,a=t[e],o=i._getLoader(a);if(o){var l=o.onLoad,c=o.onError;o.onLoad=function(d){o.onLoad=l,o.onError=c;var g=l&&l.call(o,d)||d.target;i._onItemLoad(e,g)},o.onError=function(d){o.onLoad=l,o.onError=c,c&&c.call(o,d),i._onItemError(e,d)},i._connections++}i._loadNext(),o&&o.load(a)}},_getLoader:function(i){var t=i.loader;if(t)return t;var r=i.type||n(i.src);switch(r){case"png":case"jpg":case"jpeg":case"gif":case"webp":t=new v;break;case"js":case"jsonp":t=new h;break}return t},_onItemLoad:function(i,t){var r=this,e=r._source[i];e.loaded=!0,e.content=t,r._connections--,r._loaded++,r.fire("load",e),r._loadNext()},_onItemError:function(i,t){var r=this,e=r._source[i];e.error=t,r._connections--,r._loaded++,r.fire("error",e),r._loadNext()},getSize:function(i){for(var t=0,r=this._source,e=0;e<r.length;e++){var a=r[e];t+=(i?a.loaded&&a.size:a.size)||0}return t},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});function n(i){var t=/\/?[^/]+\.(\w+)(\?\S+)?$/i,r,e;return(r=i.match(t))&&(e=r[1].toLowerCase()),e||null}u.Hilo.LoadQueue=s})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=u.Hilo.EventMixin,h=x.create({Mixes:v,constructor:function(s){y.copy(this,s,!0),this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){var s;try{s=this._element=new Audio,s.addEventListener("canplaythrough",this._onAudioEvent,!1),s.addEventListener("ended",this._onAudioEvent,!1),s.addEventListener("error",this._onAudioEvent,!1),s.src=this.src,s.volume=this.volume,s.load()}catch{s=this._element={},s.play=s.pause=function(){}}}return this},_onAudioEvent:function(s){var n=s.type;switch(n){case"canplaythrough":s.target.removeEventListener(n,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error");break}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(s){return this.volume!=s&&(this.volume=s,this._element.volume=s),this},setMute:function(s){return this.muted!=s&&(this.muted=s,this._element.volume=s?0:this.volume),this},Statics:{isSupported:u.Audio!==null}});u.Hilo.HTMLAudio=h})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=u.Hilo.EventMixin,h=(function(){var s=null;try{var n=u.AudioContext||u.webkitAudioContext;n&&(s=new n)}catch{s=null}return x.create({Mixes:v,constructor:function(i){y.copy(this,i,!0),this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=s,this._gainNode=s.createGain?s.createGain():s.createGainNode(),this._gainNode.connect(s.destination),this._onAudioEvent=this._onAudioEvent.bind(this),this._onDecodeComplete=this._onDecodeComplete.bind(this),this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var i=h._bufferCache[this.src];if(i)this._onDecodeComplete(i);else{var t=new XMLHttpRequest;t.src=this.src,t.open("GET",this.src,!0),t.responseType="arraybuffer",t.onload=this._onAudioEvent,t.onprogress=this._onAudioEvent,t.onerror=this._onAudioEvent,t.send()}this._buffer=!0}return this},_onAudioEvent:function(i){var t=i.type;switch(t){case"load":var r=i.target;r.onload=r.onprogress=r.onerror=null,this._context.decodeAudioData(r.response,this._onDecodeComplete,this._onDecodeError),r=null;break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"progress":this.fire(i);break;case"error":this.fire(i);break}},_onDecodeComplete:function(i){h._bufferCache[this.src]||(h._bufferCache[this.src]=i),this._buffer=i,this.loaded=!0,this.duration=i.duration,this.fire("load"),this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var i=this._context.createBufferSource();i.start||(i.start=i.noteOn,i.stop=i.noteOff),i.buffer=this._buffer,i.onended=this._onAudioEvent,this._gainNode.gain.value=this.muted?0:this.volume,i.connect(this._gainNode),i.start(0,this._offset),this._audioNode=i,this._startTime=this._context.currentTime,this.playing=!0},_clearAudioNode:function(){var i=this._audioNode;i&&(i.onended=null,i.disconnect(0),this._audioNode=null)},play:function(){return this.playing&&this.stop(),this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1),this},setVolume:function(i){return this.volume!=i&&(this.volume=i,this._gainNode.gain.value=i),this},setMute:function(i){return this.muted!=i&&(this.muted=i,this._gainNode.gain.value=i?0:this.volume),this},Statics:{isSupported:s!==null,enabled:!1,enable:function(){if(!this.enabled&&s){var i=s.createBufferSource();return i.buffer=s.createBuffer(1,1,22050),i.connect(s.destination),i.start?i.start(0,0,0):i.noteOn(0,0,0),this.enabled=!0,!0}return this.enabled},_bufferCache:{},clearBufferCache:function(i){i?this._bufferCache[i]=null:this._bufferCache={}}}})})();u.Hilo.WebAudio=h})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.HTMLAudio,y=u.Hilo.WebAudio,v=u.Hilo.util,h={_audios:{},enableAudio:function(){y.isSupported&&y.enable()},getAudio:function(s,n){n===void 0&&(n=!0),s=this._normalizeSource(s);var i=this._audios[s.src];return i||(n&&y.isSupported?i=new y(s):x.isSupported&&(i=new x(s)),this._audios[s.src]=i),i},removeAudio:function(s){var n=typeof s=="string"?s:s.src,i=this._audios[n];i&&(i.stop(),i.off(),this._audios[n]=null,delete this._audios[n])},_normalizeSource:function(s){var n={};return typeof s=="string"?n={src:s}:v.copy(n,s),n}};u.Hilo.WebSound=h})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=x.create({constructor:function(h){this.width=0,this.height=0,this.target=null,this.deadzone=null,this.bounds=null,this.scroll={x:0,y:0},y.copy(this,h)},tick:function(h){var s=this.target,n=this.scroll,i=this.bounds,t=this.deadzone;if(s){var r,e;t?(r=Math.min(Math.max(s.x-n.x,t[0]),t[0]+t[2]),e=Math.min(Math.max(s.y-n.y,t[1]),t[1]+t[3])):(r=this.width*.5,e=this.height*.5),n.x=s.x-r,n.y=s.y-e,i&&(n.x=Math.min(Math.max(n.x,i[0]),i[0]+i[2]),n.y=Math.min(Math.max(n.y,i[1]),i[1]+i[3]))}else n.x=0,n.y=0},follow:function(h,s){this.target=h,s!==void 0&&(this.deadzone=s),this.tick()}});u.Hilo.Camera=v})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo.Class,y=u.Hilo.util,v=(function(){var h=Math.PI/180;function s(r,e,a,o,l){return{x:r,y:e*o-a*l,z:e*l+a*o}}function n(r,e,a,o,l){return{x:r*o-a*l,y:e,z:r*l+a*o}}function i(r,e,a,o,l){return{x:r*o-e*l,y:r*l+e*o,z:a}}var t=x.create({constructor:function(r){r.x=r.x||0,r.y=r.y||0,r.z=r.z||0,r.rotationX=r.rotationX||0,r.rotationY=r.rotationY||0,r.rotationZ=r.rotationZ||0,y.copy(this,r)},translate:function(r,e,a){this.tx=r,this.ty=e,this.tz=a},rotateX:function(r){this.rotationX=r},rotateY:function(r){this.rotationY=r},rotateZ:function(r){this.rotationZ=r},project:function(r,e){var a=this.rotationX*h,o=this.rotationY*h,l=this.rotationZ*h,c=Math.cos(a),d=Math.sin(a),g=Math.cos(o),_=Math.sin(o),m=Math.cos(l),T=Math.sin(l),p=r.x-this.x,f=r.y-this.y,b=r.z-this.z,C=i(p,f,b,m,T);C=n(C.x,C.y,C.z,g,_),C=s(C.x,C.y,C.z,c,d),this.tx&&(C.x-=this.tx),this.ty&&(C.y-=this.ty),this.tz&&(C.z-=this.tz);var E=this.fv/(this.fv+C.z),H=C.x*E,S=-C.y*E,A={x:H+this.fx,y:S+this.fy,z:-C.z,scale:E};return e&&(e.x=A.x,e.y=A.y,e.z=A.z,e.scaleX=A.scale,e.scaleY=A.scale),A},sortZ:function(){this.stage.sortChildren(function(r,e){return r.z-e.z})},tick:function(){this.sortZ()}});return t})();u.Hilo.Camera3d=v})(window),(function(u){u.Hilo||(u.Hilo={});var x=u.Hilo,y=u.Hilo.Class,v=u.Hilo.View,h=u.Hilo.Container,s=u.Hilo.Drawable,n=u.Hilo.util,i=(function(){for(var t=["x","y","vx","vy","ax","ay","rotation","rotationV","scale","scaleV","alpha","alphaV","life"],r=[],e=0,a=t.length;e<a;e++){var o=t[e];r.push(o),r.push(o+"Var")}var l={x:0,y:0,vx:0,vy:0,ax:0,ay:0,scale:1,scaleV:0,alpha:1,alphaV:0,rotation:0,rotationV:0,life:1},c=[],d=y.create({Extends:h,constructor:function(m){this.id=this.id||m.id||x.getUid("ParticleSystem"),this.emitterX=0,this.emitterY=0,this.gx=0,this.gy=0,this.totalTime=1/0,this.emitNum=10,this.emitNumVar=0,this.emitTime=.2,this.emitTimeVar=0,this.particle={},d.superclass.constructor.call(this,m),this.reset(m)},Statics:{PROPS:r,PROPS_DEFAULT:l,diedParticles:c},reset:function(m){n.copy(this,m),this.particle.system=this,this.totalTime<=0&&(this.totalTime=1/0)},onUpdate:function(m){m*=.001,this._isRun&&(this._totalRunTime+=m,this._currentRunTime+=m,this._currentRunTime>=this._emitTime&&(this._currentRunTime=0,this._emitTime=_(this.emitTime,this.emitTimeVar),this._emit()),this._totalRunTime>=this.totalTime&&this.stop())},_emit:function(){for(var m=_(this.emitNum,this.emitNumVar)>>0,T=0;T<m;T++)this.addChild(g.create(this.particle))},start:function(){this.stop(!0),this._currentRunTime=0,this._totalRunTime=0,this._isRun=!0,this._emitTime=_(this.emitTime,this.emitTimeVar)},stop:function(m){if(this._isRun=!1,m)for(var T=this.children.length-1;T>=0;T--)this.children[T].destroy()}}),g=y.create({Extends:v,constructor:function(m){this.id=this.id||m.id||x.getUid("Particle"),g.superclass.constructor.call(this,m),this.init(m)},onUpdate:function(m){if(m*=.001,this._died)return!1;var T=this.ax+this.system.gx,p=this.ay+this.system.gy;if(this.vx+=T*m,this.vy+=p*m,this.x+=this.vx*m,this.y+=this.vy*m,this.rotation+=this.rotationV,this._time>.1&&(this.alpha+=this.alphaV),this.scale+=this.scaleV,this.scaleX=this.scaleY=this.scale,this._time+=m,this._time>=this.life||this.alpha<=0)return this.destroy(),!1},setImage:function(m,T){this.drawable=this.drawable||new s,T=T||[0,0,m.width,m.height],this.width=T[2],this.height=T[3],this.drawable.rect=T,this.drawable.image=m},destroy:function(){this._died=!0,this.alpha=0,this.removeFromParent(),c.push(this)},init:function(m){this.system=m.system,this._died=!1,this._time=0,this.alpha=1;for(var T=0,p=r.length;T<p;T++){var f=r[T],b=m[f]===void 0?l[f]:m[f];this[f]=_(b,m[f+"Var"])}if(this.x+=this.system.emitterX,this.y+=this.system.emitterY,m.image){var C=m.frame;C&&C[0].length&&(C=C[Math.random()*C.length>>0]),this.setImage(m.image,C),m.pivotX!==void 0&&(this.pivotX=m.pivotX*C[2]),m.pivotY!==void 0&&(this.pivotY=m.pivotY*C[3])}},Statics:{create:function(m){if(c.length>0){var T=c.pop();return T.init(m),T}else return new g(m)}}});function _(m,T){return T?m+(Math.random()-.5)*2*T:m}return d})();u.Hilo.ParticleSystem=i})(window),M.exports&&(M.exports=window.Hilo)})(R)),R.exports}var F=L();const P=N(F);class O extends D{init(){const u=P.Class.create({Extends:P.Container,constructor:function(h){u.superclass.constructor.call(this,h),this.init(h)},init:h=>{},onUpdate:function(h){if(!this.engine)return;const s=this.engine.particles;for(let n=0;n<this.engine.count;n++){const i=s[n];i.x-=i.dx,i.y-=i.dy,i.x+i.size<0?i.dx*=-1:i.y+i.size<0&&(i.dy*=-1),i.x>this.engine.width?i.dx*=-1:i.y>this.engine.height&&(i.dy*=-1),i.el.x=i.x,i.el.y=i.y}this.engine.fpsmeter.tick()},loadEngine:function(h){this.engine=h}});super.init(),this.ticker&&this.ticker.stop(),this.canvas.innerHTML="",window.cancelAnimationFrame(this.request);const x=document.querySelector("main");x.removeChild(x.lastElementChild),this.stage=new P.Stage({renderType:"canvas",container:x,width:this.width,height:this.height}),this.graphicScene=new u({width:this.width,height:this.height,engine:this}).addTo(this.stage),this.graphicScene.loadEngine(this);const y=new Array(this.count),v=[1,-1];for(let h=0;h<this.count;h++){const s=10+Math.random()*80,n=Math.random()*this.width,i=Math.random()*(this.height-s),[t,r]=[3*Math.random()*v[Math.floor(Math.random()*2)],3*Math.random()*v[Math.floor(Math.random()*2)]];let e;this.type==="sprite"?e=new P.Bitmap({image:"sprite.png"}).addTo(this.graphicScene):(e=new P.Graphics({width:s*2,height:s*2,x:n,y:i}),this.type==="stroke"?e.lineStyle(1,"#ffffff").drawCircle(1,1,s-1).closePath().endFill().addTo(this.graphicScene):this.type==="fill"&&e.beginFill("#fff").lineStyle(1,"#000000").drawCircle(1,1,s-1).closePath().endFill().addTo(this.graphicScene)),y[h]={x:n,y:i,size:s,dx:t,dy:r,el:e}}this.particles=y}render(){this.ticker=new P.Ticker(60),this.ticker.addTick(this.stage),this.ticker.start()}}document.addEventListener("DOMContentLoaded",()=>{new O().render()});
